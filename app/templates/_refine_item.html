{% if item %}
  <div id="swipe-root"
       data-item-id="{{ item.id }}"
       data-post-url="/refine/{{ ref.id }}/rate"
       class="h-full w-full flex flex-col select-none touch-none">

    <!-- Centered, size-to-image card -->
    <div class="flex-1 min-h-0 grid place-items-center">
      <figure data-card
              class="inline-block rounded-2xl overflow-hidden border border-zinc-800 bg-black relative
                     will-change-transform cursor-grab"
              style="touch-action:none">
        <img
          src="{{ item.url }}"
          alt="{{ item.relpath }}"
          class="block h-auto w-auto max-h-[80vh] max-w-[94vw] object-contain select-none"
          loading="eager"
          draggable="false" />

        <!-- (Removed corner YES/NO labels) -->

        <!-- Keep optional bottom SKIP label -->
        <div data-skip
             class="absolute bottom-3 left-1/2 -translate-x-1/2 px-2 py-1 text-xs font-semibold rounded bg-zinc-700/90 pointer-events-none"
             style="opacity:0">SKIP</div>

        <!-- Center icons -->
        <div data-yes-mid
             class="pointer-events-none absolute inset-0 grid place-items-center"
             style="opacity:0; transform:scale(0.9);">
          <!-- Heart -->
          <svg viewBox="0 0 24 24" class="h-28 w-28 text-emerald-400 drop-shadow"
               fill="currentColor" aria-hidden="true">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6 4 4 6.5 4c1.74 0 3.41.81 4.5 2.09C12.09 4.81 13.76 4 15.5 4 18 4 20 6 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
          </svg>
        </div>
        <div data-no-mid
             class="pointer-events-none absolute inset-0 grid place-items-center"
             style="opacity:0; transform:scale(0.9);">
          <!-- Big X -->
          <svg viewBox="0 0 24 24" class="h-28 w-28 text-rose-500 drop-shadow"
               fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round">
            <path d="M6 6L18 18M18 6L6 18"/>
          </svg>
        </div>
      </figure>
    </div>

    <!-- Fallback controls -->
    <form
      hx-post="/refine/{{ ref.id }}/rate"
      hx-target="#refine-card"
      hx-swap="innerHTML"
      class="h-12 flex items-center justify-center gap-2">
      <input type="hidden" name="item_id" value="{{ item.id }}">
      <button name="action" value="no"
              class="px-4 py-2 rounded-md bg-rose-600 hover:bg-rose-500 text-sm">
        No
      </button>
      <button name="action" value="skip"
              class="px-4 py-2 rounded-md bg-zinc-800 border border-zinc-700 hover:bg-zinc-700 text-sm">
        Skip
      </button>
      <button name="action" value="yes"
              class="px-4 py-2 rounded-md bg-emerald-600 hover:bg-emerald-500 text-sm">
        Yes
      </button>
    </form>
  </div>
{% else %}
  <div class="h-full grid place-items-center text-zinc-400">No item.</div>
{% endif %}
